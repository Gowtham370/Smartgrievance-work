<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SmartSeva — Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Your main theme -->
  <link rel="stylesheet" href="styles.css">

  <style>
    /* extra admin-specific polish (uses your theme vars) */
    :root{
      --primary:   #ff671f;
      --secondary: #046a38;
      --accent:    #013369;
      --bg:        #f3f4f6;
      --text:      #1f2937;
      --border:    #d1d5db;
    }

    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: #f3f4f6;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    .admin-shell{
      flex:1;
      padding: 1.5rem 1rem 2.5rem;
    }

    .admin-header{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
      margin-bottom:1rem;
    }

    .admin-title{
      font-weight:800;
      color:var(--accent);
    }

    .admin-badge{
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      padding:.25rem .7rem;
      border-radius:999px;
      background:rgba(1,51,105,0.06);
      font-size:.8rem;
      color:var(--accent);
    }

    .summary-card{
      border-radius:16px;
      border:1px solid var(--border);
      background:#fff;
      padding:1rem 1.1rem;
      box-shadow:0 6px 18px rgba(15,23,42,0.06);
    }
    .summary-label{ font-size:.82rem; color:#6b7280; }
    .summary-value{ font-size:1.4rem; font-weight:800; color:var(--accent); }

    .status-pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:.15rem .5rem;
      border-radius:999px;
      font-size:.78rem;
      font-weight:600;
      text-transform:capitalize;
    }
    .status-pending{ background:rgba(234,179,8,0.12); color:#854d0e; }
    .status-approved{ background:rgba(22,163,74,0.12); color:#166534; }
    .status-rejected{ background:rgba(248,113,113,0.14); color:#991b1b; }
    .status-sent{ background:rgba(37,99,235,0.12); color:#1d4ed8; }

    .table thead th{
      font-size:.8rem;
      text-transform:uppercase;
      letter-spacing:.05em;
      background:#f9fafb;
    }

    .table tbody td{
      vertical-align:middle;
      font-size:.88rem;
    }

    .btn-action{
      border-radius:999px;
      padding:.22rem .6rem;
      font-size:.78rem;
      font-weight:600;
    }

    .filter-bar{
      display:flex;
      flex-wrap:wrap;
      gap:.75rem;
      align-items:center;
      justify-content:space-between;
      margin:1rem 0 .6rem;
    }
  </style>
</head>
<body>

<!-- SMARTSEVA GLOBAL NAVBAR -->
<nav class="navbar navbar-expand-md navbar-light bg-white sticky-top shadow-sm">
  <div class="container-fluid">

    <!-- LEFT: Brand -->
    <a class="navbar-brand d-flex align-items-center gap-2" href="index.html#home">
      <img src="./assets/ChatGPT Image Nov 10, 2025, 02_27_51 PM.png"
           width="36" height="36" alt="SmartSeva" style="border-radius:8px;object-fit:cover;">
      <span class="brand-text fw-bold">SmartSeva</span>
    </a>

    <!-- Mobile Toggler -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
            aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- CENTER + RIGHT -->
    <div class="collapse navbar-collapse" id="mainNav">

      <!-- CENTER: main links -->
      <ul class="navbar-nav mx-auto mb-2 mb-md-0">
        <li class="nav-item">
          <a class="nav-link" href="index.html#home">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#about">About Us</a>
        </li>
        <li class="nav-item">
          <a class="btn btn-primary px-3 py-1 ms-md-2 my-1 my-md-0" href="index.html#raise">
            Submit a Grievance
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="dashboard.html">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="index.html#contact">Contact Us</a>
        </li>
      </ul>

      <!-- RIGHT: language + auth -->
      <div class="d-flex align-items-center gap-2 ms-md-0 ms-auto">

        <!-- Language dropdown -->
        <div class="dropdown">
          <button class="btn btn-light border dropdown-toggle py-1 px-2"
                  id="langDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Language
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="langDropdown">
            <li><button class="dropdown-item" type="button">English</button></li>
            <li><button class="dropdown-item" type="button">हिंदी</button></li>
            <li><button class="dropdown-item" type="button">తెలుగు</button></li>
          </ul>
        </div>

        <!-- AUTH AREA -->
        <div class="ms-1">

          <!-- STATE 1: Logged OUT (default) -->
          <div id="navAuthLoggedOut" class="dropdown">
            <button class="btn btn-outline-primary dropdown-toggle py-1 px-3"
                    type="button" data-bs-toggle="dropdown" aria-expanded="false">
              Login
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="login.html">Login</a></li>
              <li><a class="dropdown-item" href="signup.html">Sign Up</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="adminlogin.html">Admin Login</a></li>
            </ul>
          </div>

          <!-- STATE 2: Logged IN (hidden until JS detects smartseva_user) -->
          <div id="navAuthLoggedIn" class="dropdown d-none">
            <button class="btn btn-light dropdown-toggle d-flex align-items-center gap-2 py-1 px-2"
                    type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <!-- avatar or initial -->
              <div id="navUserAvatar"
                   class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center"
                   style="width:32px;height:32px;font-size:.9rem;font-weight:700;">
                U
              </div>
              <span id="navUserName" class="small fw-semibold">User</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="profile.html">View Profile</a></li>
              <li><a class="dropdown-item" href="dashboard.html">My Complaints</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><button class="dropdown-item text-danger" id="btnNavLogout" type="button">Logout</button></li>
            </ul>
          </div>

        </div>

      </div>
    </div>
  </div>
</nav>

  <!-- MAIN ADMIN CONTENT -->
  <main class="admin-shell container-lg">

    <div class="admin-header">
      <div>
        <div class="admin-badge">
          <i class="bi bi-shield-lock-fill"></i>
          <span>Government Officer Console</span>
        </div>
        <h1 class="admin-title h3 mb-0">Admin Dashboard</h1>
        <p class="small text-muted mb-0">
          Review citizen complaints, approve valid ones and forward them to the concerned departments.
        </p>
      </div>

      <div class="text-end small text-muted">
        <div id="adminGeidLabel" class="text-muted"></div>
      </div>
    </div>

    <!-- Stat summary -->
    <div class="row g-3 mb-3">
      <!-- <div class="col-6 col-md-3">
        <div class="summary-card">
          <div class="summary-label">Pending approval</div>
          <div id="statPending" class="summary-value">0</div>
        </div>
      </div> -->
      <div class="col-6 col-md-3">
        <div class="summary-card">
          <div class="summary-label">Approved</div>
          <div id="statApproved" class="summary-value">0</div>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="summary-card">
          <div class="summary-label">Sent to department</div>
          <div id="statSent" class="summary-value">0</div>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="summary-card">
          <div class="summary-label">Rejected</div>
          <div id="statRejected" class="summary-value">0</div>
        </div>
      </div>
    </div>

    <!-- Filter bar -->
    <div class="filter-bar">
      <div class="d-flex align-items-center gap-2">
        <label for="statusFilter" class="small text-muted">Filter by status:</label>
        <select id="statusFilter" class="form-select form-select-sm" style="max-width:180px;">
          <option value="all" selected>All</option>
          <!-- <option value="pending">Pending</option> -->
          <!-- <option value="approved">Approved</option> -->
          <option value="sent">Sent to Dept.</option>
          <option value="rejected">Rejected</option>
        </select>
      </div>
      <div class="small text-muted">
        Last sync: <span id="lastSyncLabel">–</span>
      </div>
    </div>

    <!-- Complaints table -->
    <div class="table-responsive shadow-sm bg-white rounded-3">
      <table class="table mb-0">
        <thead>
          <tr>
            <th scope="col">Token</th>
            <th scope="col">Citizen</th>
            <th scope="col">Category</th>
            <th scope="col">Location</th>
            <th scope="col">Severity</th>
            <th scope="col">Raised</th>
            <th scope="col">Status</th>
            <th scope="col" class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody id="complaintsBody">
          <!-- rows rendered via JS -->
        </tbody>
      </table>
    </div>

  </main>

  <!-- View details modal -->
  <div class="modal fade" id="complaintModal" tabindex="-1" aria-labelledby="complaintModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="complaintModalLabel">Complaint details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <dl class="row small">
            <dt class="col-sm-3">Token</dt>
            <dd class="col-sm-9" id="detailToken"></dd>

            <dt class="col-sm-3">Citizen</dt>
            <dd class="col-sm-9" id="detailCitizen"></dd>

            <dt class="col-sm-3">Category</dt>
            <dd class="col-sm-9" id="detailCategory"></dd>

            <dt class="col-sm-3">Location</dt>
            <dd class="col-sm-9" id="detailLocation"></dd>

            <dt class="col-sm-3">Severity</dt>
            <dd class="col-sm-9" id="detailSeverity"></dd>

            <dt class="col-sm-3">Raised at</dt>
            <dd class="col-sm-9" id="detailRaised"></dd>

            <dt class="col-sm-3">Description</dt>
            <dd class="col-sm-9" id="detailDescription"></dd>

            <dt class="col-sm-3">Current status</dt>
            <dd class="col-sm-9" id="detailStatus"></dd>
          </dl>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="admin-dashboard.js"></script>
  <script src="app.js"></script>
</body>
</html>